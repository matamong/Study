# 20200106 TIL Diary

- JPA의 데이터베이스 스키마 자동 생성기능은 운영단계에서는 절대 쓰지말자
  - 테이블을 자동으로 드랍,생성하기 때문에 크으으은 일 난다.
  - **운영단계에서는 create drop 의 DDL을 모두 막아버려야 사고가 나지 않는다.**
  - enum 을 사용할 때는 String 타입으로 넣자(기본으로 넣으면 숫자가 순서대로 매겨지는데 나중에 하나 추가할 시 순서가 꼬인다.)
- JPA 의 양방향 연관관계에서는 주인(Owner)가 있고 그것만이 테이블에 영향을 줄 수 있다.
   - 연관관계의 주인만이 외래 키를 관리(등록, 수정) 할 수 있다.
   - 주인이 아닌 쪽은 읽기만 가능.
   - 주인이 아니면 mappedBy 속성으로 주인을 지정한다.
   - 두 객체가 하나의 테이블(실제로 테이블은 하나로 조회가 다 되니까)을 만질 때 일어나는 문제를 해결
   - 외래키(FK)가 존재하는 그 객체를 주인으로 삼는다.
       - 손 댄 곳이 수정되어야 멘붕에 빠지지 않는다.
- 그런데 단방향이 문제가 없으니 설계할 때 단방향만 생각하고 했다가 필요할 때만 양방향을 적용하자.
- 식별자(기본키)를 위한 팁
   - 대체키를 쓰자.
      - 비즈니스와는 전혀 관련없는 대체키를 쓰자. 변하지 않는 것은 절대 없다.
      - **Long 타입 + 대체키 + 키 생성전략** 을 사용하자.
- 영속성 / 비영속성
- 영속 컨텍스트 안에서의 1차 캐시

 <br><br>

## **느낀점** <br>
인터넷에는 많은 지식들이 돌아다니는것같다. JPA에 대해서 조금 더 자세히 알아보았으니 이제 JPA를 이용해서 유저부분을 요리조리 만들어봐야겠다.

* * *

참고 <br>
https://www.youtube.com/watch?v=0zTtkIYMOIw&list=PL9mhQYIlKEhfpMVndI23RwWTL9-VL-B7U&index=5